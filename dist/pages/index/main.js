require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([3],{"/Q/l":function(t,e){},"5vTQ":function(t,e,i){"use strict";var n=i("Xxa5"),s=i.n(n),a=i("exGp"),o=i.n(a),r=i("gyMJ"),c=i("0xDb");e.a={data:function(){return{winHeight:0,tabsOption:["最新消息","主题日报"],activeIndex:0,articles:[],bottomLoading:!0,themes:[]}},mounted:function(){this.getSystemInfo(),this.getLatestArticle()},methods:{getLatestArticle:function(){var t=this;Object(r.e)().then(function(e){e&&(e.formatDate=Object(c.a)(e.date),t.articles=[],t.articles.push(e))})},getBeforeArticle:function(){var t=this;if("nothing"!==this.bottomLoading&&"error"!==this.bottomLoading){this.bottomLoading="loading";var e=this.articles[this.articles.length-1].date;Object(r.c)(e).then(function(e){e?(t.bottomLoading=!0,e.formatDate=Object(c.a)(e.date),t.articles.push(e)):t.bottomLoading="nothing"}).catch(function(){t.bottomLoading="error"})}},getThemes:function(){var t=this;Object(r.i)().then(function(e){t.themes=e.others})},pageChange:function(t){this.activeIndex=t.mp.detail.current,0===this.activeIndex&&0===this.articles.length?this.getLatestArticle():1===this.activeIndex&&0===this.themes.length&&this.getThemes()},getSystemInfo:function(){var t=this;wx.getSystemInfo({success:function(e){t.winHeight=e.windowHeight-50}})}},onPullDownRefresh:function(){var t=this;return o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.activeIndex){e.next=5;break}return e.next=3,t.getLatestArticle();case 3:e.next=7;break;case 5:return e.next=7,t.getThemes();case 7:wx.stopPullDownRefresh();case 8:case"end":return e.stop()}},e,t)}))()},onShareAppMessage:function(){return{path:"/pages/index/main"}}}},MhDc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("5nAL"),s=i.n(n),a=i("Qt9A");new s.a(a.a).$mount()},Qt9A:function(t,e,i){"use strict";var n=i("5vTQ"),s=i("Vnx3");var a=function(t){i("/Q/l")},o=i("ybqe")(n.a,s.a,a,null,null);e.a=o.exports},Vnx3:function(t,e,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"index"}},[i("div",{staticClass:"index-tabs"},t._l(t.tabsOption,function(e,n){return i("div",{key:n,staticClass:"tabs-item",class:[t.activeIndex===n?"active":""],attrs:{eventid:"0-"+n},on:{click:function(e){t.activeIndex=n}}},[t._v(t._s(e))])})),t._v(" "),i("swiper",{staticClass:"index-swiper",attrs:{current:t.activeIndex,eventid:"2"},on:{change:t.pageChange}},[i("swiper-item",{staticClass:"swiper-item",attrs:{mpcomid:"1"}},[i("scroll-view",{style:{height:t.winHeight+"px"},attrs:{"scroll-y":"",eventid:"1"},on:{scrolltolower:t.getBeforeArticle}},[t._l(t.articles,function(t,e){return i("article-list",{key:e,attrs:{json:t.stories,date:t.formatDate,mpcomid:"0-"+e}})}),t._v(" "),t.articles.length>0&&t.bottomLoading?i("div",{staticClass:"list-bottomLoad"},["loading"===t.bottomLoading?i("div",{staticClass:"loading"},[t._v("加载中...")]):t._e(),t._v(" "),"nothing"===t.bottomLoading?i("div",{staticClass:"nothing"},[t._v("刷完了，休息一下吧")]):t._e(),t._v(" "),"error"===t.bottomLoading?i("div",{staticClass:"error"},[t._v("出错了，刷新试试")]):t._e()]):t._e()],2)],1),t._v(" "),i("swiper-item",{staticClass:"swiper-item",attrs:{mpcomid:"3"}},[i("scroll-view",{style:{height:t.winHeight+"px"},attrs:{"scroll-y":""}},[i("theme-list",{attrs:{json:t.themes,mpcomid:"2"}})],1)],1)],1)],1)},staticRenderFns:[]};e.a=n}},["MhDc"]);